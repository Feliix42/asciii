<style>
    #project-list {
        min-width: 40em
    }

    #projects {
        height: 250px;
        max-height: 250px;
        overflow: scroll;
    }

    td.checkbox {
        text-align: center;
        width: 20px;
        overflow: hidden;
        display: inline-block;
        white-space: nowrap;
    }
</style>



<div id="projects">
<input bind:value=search placeholder="filter"/> {filteredProjects.length}
<table id="project-list">
    {#each filteredProjects as [key, project], index}
    <tr on:click="fire('select', {project})">
        <td>{index + 1}</td>
        <td>{project.event.name}</td>
        <td>{project.event.manager}</td>
        <td>{project.invoice.number || ''}</td>
        <td>{project.event.date}</td>
        <td class="checkbox">{project.checks.ready_for_offer ? '✔' : '𝘅'}</td>
        <td class="checkbox">{project.checks.ready_for_invoice ? '✔' : '𝘅'}</td>
        <td class="checkbox">{project.checks.ready_for_archive ? '✔' : '𝘅'}</td>
        <td class="checkbox">{project.checks.payed_by_customer ? '✔' : '𝘅'}</td>
    </tr>
    {/each}
</table>
</div>

<script>

    export default {
        methods: {
        },

        data() {
            return {
                search: ''
            };
        },

        computed: {
            filteredProjects: ({ search, projects }) => {
                search = search.toLowerCase()
                const search_in = hay => hay && hay.toLowerCase().includes(search)

                return projects.filter(([, project]) => {
                    const {
                        event: {name, manager},
                        client: {full_name},
                        invoice: {number_long, number: invoice_number},
                    } = project;

                    return search.length === 0 ||[
                        name,
                        manager,
                        full_name,
                        number_long,
                        invoice_number
                    ].some(search_in);
                });
            },
        },
    };
</script>