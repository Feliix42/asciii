<style>
    #flex {
        display: flex;
        flex-wrap: wrap
    }
    .bills {
        display: flex;
        flex-wrap: wrap;
    }
    button.close {
        float:right;
    }
</style>

<hr/>

<div class="card">
    <div class="card-body">

        <button type="button" class="close" aria-label="Close" on:click="fire('close')">
                <span aria-hidden="true">&times;</span>
        </button>
        <h2 class="card-title">{project.event.name}</h2>

        <span id="flex" transition:slide>
            <address class="container">
                {project.client.full_name}
                {#if project.client.email}
                (<a href="mailto:{project.client.email} ">✉️ {project.client.email}</a>)
                {/if}
                <pre>{project.client.address}</pre>
                {#if project.invoice.official}
                <strong>{project.invoice.official}</strong>
                {/if}
            </address>

            <table class="table">
                <tr>
                    <th> Angebot </th> <th> Rechnung</th>
                </tr>
                <tr>
                    <td> {project.offer.number} </td> <td> {project.invoice.number_long} </td>
                </tr>
            </table>
        </span>

        <div class="bills" transition:slide>
            <BillTable
                name="offer"
                date={project.offer.date}
                bill={project.bills.offer}
                desc={project.offer} />
            <BillTable
                name="invoice"
                date={project.invoice.date}
                bill={project.bills.invoice}
                desc={project.invoice} />
        </div>
    </div>
</div>

<script>
    import BillTable from './Bill.html';
    import { slide } from 'svelte-transitions';
    export default {
        components: { BillTable },
        // onstate({ current: { project } }) {
        //     console.dir({ project })
        //     console.table( project.bills.offer)
        //     console.table( project.bills.invoice)
        // }
        methods: {
            closeView() {
                this.destroy()
            },
        },
        transitions: {slide}
    }
</script>